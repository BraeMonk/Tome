<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<title>Tome</title>
<link rel='manifest' href='manifest.json'>
<link rel='stylesheet' href='styles.css'>
<link href='https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital@0;1&display=swap' rel='stylesheet'>
</head>
<body>

<div class='particles' id='particles'></div>

<div class='book-container'>
  <div class='book-cover' id='bookCover'>
    <div class='cover-ornament'>
      <div class='rune'>âŸ</div>
      <h1>Tome</h1>
      <div class='subtitle'>Book of Life Spells</div>
      <div class='cover-glow'></div>
    </div>
  </div>

  <div class='book-pages' id='bookPages'>
    <div class='page-edge-left'></div>
    <div class='page-edge-right'></div>
    
    <header class='grimoire-header'>
      <div class='header-ornament'>âœ¦</div>
      <div class='mana-crystal'>
        <div class='crystal-glow'></div>
        <div id='manaDisplay'>0</div>
        <div class='mana-label'>Mana</div>
      </div>
      <div class='level-display'>
        <span id='levelDisplay'>Novice</span>
      </div>
    </header>

    <!-- Spell-cast animation canvas -->
    <canvas id="spellCanvas" class="spell-canvas" aria-hidden="true"></canvas>

    <nav class='spell-tabs'>
      <button class='spell-tab active' data-tab='daily'>
        <span class='tab-icon'>â˜€</span>
        <span>Daily Quests</span>
      </button>
      <button class='spell-tab' data-tab='spells'>
        <span class='tab-icon'>ğŸ“œ</span>
        <span>Spell Library</span>
      </button>
      <button class='spell-tab' data-tab='stats'>
        <span class='tab-icon'>âš”</span>
        <span>Progress</span>
      </button>
      <button class='spell-tab' data-tab='rituals'>
        <span class='tab-icon'>ğŸŒ™</span>
        <span>Rituals</span>
      </button>
    </nav>

    <main class='grimoire-content'>
      <!-- DAILY -->
      <section id='daily' class='spell-view active'>
        <h2 class='chapter-title'>Daily Quests</h2>
        <div class='chapter-divider'>âœ¦ âœ¦ âœ¦</div>
        <p class='spell-intro'>Complete these sacred tasks before the sun sets to maintain your streak.</p>
        <button id='newSpread' class='action-button'>ğŸ”® Draw New Spread</button>
        <ul id='dailyList' class='spell-list'></ul>
      </section>

      <!-- SPELL LIBRARY -->
      <section id='spells' class='spell-view'>
        <h2 class='chapter-title'>The Complete Spell Library</h2>
        <div class='chapter-divider'>âœ¦ âœ¦ âœ¦</div>
        <p class='spell-intro'>
          All known spells for wellness and vitality. Tap to quick cast, add to your daily spread, or create your own.
        </p>

        <div class="spell-library-controls">
          <input type="text" id="spellSearch" placeholder="Search spells by name or effect...">
          <button id="clearSearch" class="secondary-button">Clear</button>
          <button id="toggleCustomSpell" class="secondary-button">âœš Custom Spell</button>
        </div>

        <!-- Custom Spell Creator -->
        <div id="customSpellCard" class="custom-card hidden">
          <h3 class="section-subtitle">Create Custom Spell</h3>
          <p class="custom-help">Design your own life spell. It will appear in the library and can be added to your daily quests.</p>
          
          <div class="custom-form-row">
            <label for="customSpellName">Spell Name</label>
            <input id="customSpellName" type="text" maxlength="60" placeholder="e.g. Gentle Wake-Up Ritual">
          </div>

          <div class="custom-form-row">
            <label for="customSpellDesc">Description</label>
            <textarea id="customSpellDesc" rows="3" placeholder="Describe what this spell asks you to do."></textarea>
          </div>

          <div class="custom-form-row custom-form-inline">
            <div>
              <label for="customSpellReward">Mana Reward</label>
              <input id="customSpellReward" type="number" min="1" max="50" value="8">
            </div>
            <div>
              <label for="customSpellCategory">Category</label>
              <select id="customSpellCategory">
                <option value="body">âš— Body</option>
                <option value="mind">ğŸ§  Mind</option>
                <option value="spirit">ğŸ’« Spirit</option>
                <option value="environment">ğŸŒ¿ Environment</option>
              </select>
            </div>
          </div>

          <div class="custom-actions">
            <button id="saveCustomSpell" class="action-button">Save Spell</button>
          </div>
        </div>
        
        <div class='spell-category'>
          <h3 class='category-title'>âš— Body Enhancement Spells</h3>
          <ul id='bodySpells' class='spell-list'></ul>
        </div>
        
        <div class='spell-category'>
          <h3 class='category-title'>ğŸ§  Mind Fortification Spells</h3>
          <ul id='mindSpells' class='spell-list'></ul>
        </div>
        
        <div class='spell-category'>
          <h3 class='category-title'>ğŸ’« Spirit Restoration Spells</h3>
          <ul id='spiritSpells' class='spell-list'></ul>
        </div>
        
        <div class='spell-category'>
          <h3 class='category-title'>ğŸŒ¿ Environment Purification</h3>
          <ul id='environmentSpells' class='spell-list'></ul>
        </div>
      </section>

      <!-- STATS -->
      <section id='stats' class='spell-view'>
        <h2 class='chapter-title'>Your Journey</h2>
        <div class='chapter-divider'>âœ¦ âœ¦ âœ¦</div>
        
        <div class='stat-cards'>
          <div class='stat-card'>
            <div class='stat-icon'>ğŸ”¥</div>
            <div class='stat-value' id='streak'>0</div>
            <div class='stat-label'>Day Streak</div>
          </div>
          
          <div class='stat-card'>
            <div class='stat-icon'>âš¡</div>
            <div class='stat-value' id='totalCasts'>0</div>
            <div class='stat-label'>Total Casts</div>
          </div>
          
          <div class='stat-card'>
            <div class='stat-icon'>ğŸ†</div>
            <div class='stat-value' id='level'>1</div>
            <div class='stat-label'>Wizard Level</div>
          </div>
        </div>

        <div class='progress-section'>
          <h3 class='section-subtitle'>Experience Progress</h3>
          <div class='xp-bar'>
            <div class='xp-fill' id='xpFill'></div>
            <div class='xp-text' id='xpText'>0 / 100 XP</div>
          </div>
        </div>

        <div class='achievements-section'>
          <h3 class='section-subtitle'>Achievements Unlocked</h3>
          <div id='achievementsList' class='achievements-grid'></div>
        </div>
      </section>

      <!-- RITUALS -->
      <section id='rituals' class='spell-view'>
        <h2 class='chapter-title'>Sacred Rituals</h2>
        <div class='chapter-divider'>âœ¦ âœ¦ âœ¦</div>
        <p class='spell-intro'>Powerful multi-step ceremonies for transformation. Create your own rituals and track their completion.</p>

        <div class="spell-library-controls">
          <button id="toggleCustomRitual" class="secondary-button">âœš Custom Ritual</button>
        </div>

        <!-- Custom Ritual Creator -->
        <div id="customRitualCard" class="custom-card hidden">
          <h3 class="section-subtitle">Create Custom Ritual</h3>
          <p class="custom-help">Define a multi-step ceremony. Each line is one step.</p>
          
          <div class="custom-form-row">
            <label for="customRitualName">Ritual Name</label>
            <input id="customRitualName" type="text" maxlength="80" placeholder="e.g. Sunday Reset Ceremony">
          </div>

          <div class="custom-form-row">
            <label for="customRitualDesc">Description</label>
            <textarea id="customRitualDesc" rows="3" placeholder="What is the intention of this ritual?"></textarea>
          </div>

          <div class="custom-form-row">
            <label for="customRitualSteps">Steps (one per line)</label>
            <textarea id="customRitualSteps" rows="5" placeholder="e.g.&#10;Tidy up my workspace&#10;Plan the week ahead&#10;Make a warm drink&#10;Reflect on last week"></textarea>
          </div>

          <div class="custom-form-row custom-form-inline">
            <div>
              <label for="customRitualReward">Mana Reward</label>
              <input id="customRitualReward" type="number" min="5" max="100" value="35">
            </div>
          </div>

          <div class="custom-actions">
            <button id="saveCustomRitual" class="action-button">Save Ritual</button>
          </div>
        </div>

        <ul id='ritualsList' class='ritual-list'></ul>
      </section>
    </main>

    <footer class='grimoire-footer'>
      <div class='footer-rune'>âŸ</div>
      <div class='footer-text'>May your path be illuminated</div>
    </footer>
  </div>
</div>

<div class='spell-cast-effect' id='spellEffect'>
  <div class='effect-circle'></div>
  <div class='effect-text'>+<span id='effectMana'>0</span> âœ¨</div>
</div>

<script src='script.js'></script>
<script>
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
